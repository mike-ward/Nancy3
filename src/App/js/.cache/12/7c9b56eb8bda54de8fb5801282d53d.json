{"id":"HDZ3","dependencies":[{"name":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\tsconfig.json","includedInParent":true,"mtime":1528140629610},{"name":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\package.json","includedInParent":true,"mtime":1539204817944},{"name":"mithril","loc":{"line":6,"column":40},"parent":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\components\\pages\\news.ts","resolved":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\node_modules\\mithril\\mithril.js"},{"name":"../../services/dom-service","loc":{"line":7,"column":28},"parent":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\components\\pages\\news.ts","resolved":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\services\\dom-service.ts"},{"name":"../../services/convert-service","loc":{"line":8,"column":32},"parent":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\components\\pages\\news.ts","resolved":"C:\\Users\\mike\\Documents\\GitHub\\Nancy3\\src\\App\\js\\services\\convert-service.ts"}],"generated":{"js":"\"use strict\";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,\"__esModule\",{value:!0});var t=e(require(\"mithril\")),r=require(\"../../services/dom-service\"),n=require(\"../../services/convert-service\");r.addStyleSheet(\"\\n  .new-item{margin-bottom:2em;}\\n  .home-date-time{font-weight:bold;margin:-1em 0 1em 0;}\");var a=\"timer\";exports.news={view:o,oninit:u,onremove:function(e){return clearInterval(e.state[a])}};var i={news:[],time:Date.now()};function u(e){d(),e.state[a]=setInterval(l,1e3)}function o(){return t.default(\"div\",[t.default(\"h2\",\"News\"),t.default(\"p\",new Date(i.time).toLocaleString()),t.default(\"div\",i.news.map(function(e){return m(e)}))])}function d(){t.default.request({url:\"api/markets/news\",data:Date.now()}).then(function(e){return i.news=e})}function l(){i.time=Date.now(),t.default.redraw()}function m(e){return t.default(\".news-item\",[t.default(\"h3\",[t.default(\"a\",{href:e.url,target:\"_blank\"},r.decodeHtml(e.headline))]),t.default(\"div.home-date-time\",n.dateToLocaleString(e.datetime)),t.default(\"p\",r.decodeHtml(e.summary)),t.default(\"p\",\"source: \",t.default(\"em\",r.decodeHtml(e.source)))])}","map":{"mappings":[{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":0}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":13}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":17}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":19}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":25}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":30}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":47}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":56}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":59}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":66}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":69}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":71}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":82}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":84}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":85}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":93}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":97}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":104}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":119}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":127}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":140}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":141}},{"source":"components/pages/news.ts","name":null,"original":{"line":59,"column":1},"generated":{"line":1,"column":148}},{"source":"components/pages/news.ts","name":null,"original":{"line":1,"column":1},"generated":{"line":1,"column":152}},{"source":"components/pages/news.ts","name":null,"original":{"line":1,"column":1},"generated":{"line":1,"column":156}},{"source":"components/pages/news.ts","name":null,"original":{"line":1,"column":1},"generated":{"line":1,"column":158}},{"source":"components/pages/news.ts","name":null,"original":{"line":1,"column":1},"generated":{"line":1,"column":160}},{"source":"components/pages/news.ts","name":null,"original":{"line":1,"column":1},"generated":{"line":1,"column":168}},{"source":"components/pages/news.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":180}},{"source":"components/pages/news.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":182}},{"source":"components/pages/news.ts","name":null,"original":{"line":2,"column":0},"generated":{"line":1,"column":190}},{"source":"components/pages/news.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":220}},{"source":"components/pages/news.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":222}},{"source":"components/pages/news.ts","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":230}},{"source":"components/pages/news.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":264}},{"source":"components/pages/news.ts","name":null,"original":{"line":6,"column":0},"generated":{"line":1,"column":266}},{"source":"components/pages/news.ts","name":null,"original":{"line":6,"column":14},"generated":{"line":1,"column":280}},{"source":"components/pages/news.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":375}},{"source":"components/pages/news.ts","name":null,"original":{"line":10,"column":6},"generated":{"line":1,"column":379}},{"source":"components/pages/news.ts","name":null,"original":{"line":10,"column":19},"generated":{"line":1,"column":381}},{"source":"components/pages/news.ts","name":null,"original":{"line":12,"column":13},"generated":{"line":1,"column":389}},{"source":"components/pages/news.ts","name":null,"original":{"line":12,"column":13},"generated":{"line":1,"column":397}},{"source":"components/pages/news.ts","name":null,"original":{"line":12,"column":20},"generated":{"line":1,"column":402}},{"source":"components/pages/news.ts","name":null,"original":{"line":13,"column":2},"generated":{"line":1,"column":403}},{"source":"components/pages/news.ts","name":null,"original":{"line":13,"column":8},"generated":{"line":1,"column":408}},{"source":"components/pages/news.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":410}},{"source":"components/pages/news.ts","name":null,"original":{"line":14,"column":10},"generated":{"line":1,"column":417}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":2},"generated":{"line":1,"column":419}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":12},"generated":{"line":1,"column":428}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":13},"generated":{"line":1,"column":437}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":28},"generated":{"line":1,"column":440}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":28},"generated":{"line":1,"column":447}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":42},"generated":{"line":1,"column":461}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":44},"generated":{"line":1,"column":463}},{"source":"components/pages/news.ts","name":null,"original":{"line":15,"column":50},"generated":{"line":1,"column":469}},{"source":"components/pages/news.ts","name":null,"original":{"line":18,"column":0},"generated":{"line":1,"column":475}},{"source":"components/pages/news.ts","name":null,"original":{"line":18,"column":6},"generated":{"line":1,"column":479}},{"source":"components/pages/news.ts","name":null,"original":{"line":18,"column":14},"generated":{"line":1,"column":481}},{"source":"components/pages/news.ts","name":null,"original":{"line":19,"column":2},"generated":{"line":1,"column":482}},{"source":"components/pages/news.ts","name":null,"original":{"line":19,"column":8},"generated":{"line":1,"column":487}},{"source":"components/pages/news.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":490}},{"source":"components/pages/news.ts","name":null,"original":{"line":20,"column":8},"generated":{"line":1,"column":495}},{"source":"components/pages/news.ts","name":null,"original":{"line":20,"column":13},"generated":{"line":1,"column":500}},{"source":"components/pages/news.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":1,"column":507}},{"source":"components/pages/news.ts","name":null,"original":{"line":23,"column":9},"generated":{"line":1,"column":516}},{"source":"components/pages/news.ts","name":null,"original":{"line":23,"column":16},"generated":{"line":1,"column":518}},{"source":"components/pages/news.ts","name":null,"original":{"line":24,"column":2},"generated":{"line":1,"column":521}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":2},"generated":{"line":1,"column":525}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":527}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":10},"generated":{"line":1,"column":533}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":24},"generated":{"line":1,"column":536}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":36},"generated":{"line":1,"column":548}},{"source":"components/pages/news.ts","name":null,"original":{"line":25,"column":48},"generated":{"line":1,"column":550}},{"source":"components/pages/news.ts","name":null,"original":{"line":28,"column":0},"generated":{"line":1,"column":555}},{"source":"components/pages/news.ts","name":null,"original":{"line":28,"column":9},"generated":{"line":1,"column":564}},{"source":"components/pages/news.ts","name":null,"original":{"line":29,"column":9},"generated":{"line":1,"column":568}},{"source":"components/pages/news.ts","name":null,"original":{"line":29,"column":9},"generated":{"line":1,"column":575}},{"source":"components/pages/news.ts","name":null,"original":{"line":29,"column":9},"generated":{"line":1,"column":577}},{"source":"components/pages/news.ts","name":null,"original":{"line":30,"column":4},"generated":{"line":1,"column":585}},{"source":"components/pages/news.ts","name":null,"original":{"line":31,"column":4},"generated":{"line":1,"column":591}},{"source":"components/pages/news.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":592}},{"source":"components/pages/news.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":1,"column":594}},{"source":"components/pages/news.ts","name":null,"original":{"line":32,"column":8},"generated":{"line":1,"column":602}},{"source":"components/pages/news.ts","name":null,"original":{"line":32,"column":14},"generated":{"line":1,"column":607}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":615}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":6},"generated":{"line":1,"column":617}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":625}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":629}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":17},"generated":{"line":1,"column":633}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":22},"generated":{"line":1,"column":638}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":28},"generated":{"line":1,"column":640}},{"source":"components/pages/news.ts","name":null,"original":{"line":33,"column":34},"generated":{"line":1,"column":646}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":664}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":6},"generated":{"line":1,"column":666}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":8},"generated":{"line":1,"column":674}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":15},"generated":{"line":1,"column":680}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":21},"generated":{"line":1,"column":682}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":26},"generated":{"line":1,"column":687}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":30},"generated":{"line":1,"column":691}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":31},"generated":{"line":1,"column":700}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":45},"generated":{"line":1,"column":703}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":45},"generated":{"line":1,"column":710}},{"source":"components/pages/news.ts","name":null,"original":{"line":34,"column":54},"generated":{"line":1,"column":712}},{"source":"components/pages/news.ts","name":null,"original":{"line":38,"column":0},"generated":{"line":1,"column":720}},{"source":"components/pages/news.ts","name":null,"original":{"line":38,"column":9},"generated":{"line":1,"column":729}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":733}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":1,"column":735}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":4},"generated":{"line":1,"column":743}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":12},"generated":{"line":1,"column":751}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":14},"generated":{"line":1,"column":752}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":1,"column":756}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":39},"generated":{"line":1,"column":775}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":45},"generated":{"line":1,"column":780}},{"source":"components/pages/news.ts","name":null,"original":{"line":39,"column":50},"generated":{"line":1,"column":785}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":5},"generated":{"line":1,"column":793}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":798}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":10},"generated":{"line":1,"column":807}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":15},"generated":{"line":1,"column":810}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":15},"generated":{"line":1,"column":817}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":21},"generated":{"line":1,"column":819}},{"source":"components/pages/news.ts","name":null,"original":{"line":40,"column":28},"generated":{"line":1,"column":824}},{"source":"components/pages/news.ts","name":null,"original":{"line":43,"column":0},"generated":{"line":1,"column":828}},{"source":"components/pages/news.ts","name":null,"original":{"line":43,"column":9},"generated":{"line":1,"column":837}},{"source":"components/pages/news.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":1,"column":841}},{"source":"components/pages/news.ts","name":null,"original":{"line":44,"column":8},"generated":{"line":1,"column":843}},{"source":"components/pages/news.ts","name":null,"original":{"line":44,"column":15},"generated":{"line":1,"column":848}},{"source":"components/pages/news.ts","name":null,"original":{"line":44,"column":20},"generated":{"line":1,"column":853}},{"source":"components/pages/news.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":859}},{"source":"components/pages/news.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":861}},{"source":"components/pages/news.ts","name":null,"original":{"line":45,"column":4},"generated":{"line":1,"column":869}},{"source":"components/pages/news.ts","name":null,"original":{"line":48,"column":0},"generated":{"line":1,"column":878}},{"source":"components/pages/news.ts","name":null,"original":{"line":48,"column":9},"generated":{"line":1,"column":887}},{"source":"components/pages/news.ts","name":null,"original":{"line":48,"column":18},"generated":{"line":1,"column":889}},{"source":"components/pages/news.ts","name":null,"original":{"line":58,"column":9},"generated":{"line":1,"column":892}},{"source":"components/pages/news.ts","name":null,"original":{"line":49,"column":13},"generated":{"line":1,"column":899}},{"source":"components/pages/news.ts","name":null,"original":{"line":49,"column":13},"generated":{"line":1,"column":901}},{"source":"components/pages/news.ts","name":null,"original":{"line":50,"column":4},"generated":{"line":1,"column":909}},{"source":"components/pages/news.ts","name":null,"original":{"line":51,"column":4},"generated":{"line":1,"column":922}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":923}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":6},"generated":{"line":1,"column":925}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":8},"generated":{"line":1,"column":933}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":14},"generated":{"line":1,"column":938}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":15},"generated":{"line":1,"column":939}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":15},"generated":{"line":1,"column":941}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":17},"generated":{"line":1,"column":949}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":22},"generated":{"line":1,"column":953}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":24},"generated":{"line":1,"column":954}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":30},"generated":{"line":1,"column":959}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":35},"generated":{"line":1,"column":961}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":40},"generated":{"line":1,"column":965}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":48},"generated":{"line":1,"column":972}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":67},"generated":{"line":1,"column":982}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":67},"generated":{"line":1,"column":984}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":78},"generated":{"line":1,"column":995}},{"source":"components/pages/news.ts","name":null,"original":{"line":52,"column":83},"generated":{"line":1,"column":997}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":1010}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":1,"column":1012}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":8},"generated":{"line":1,"column":1020}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":30},"generated":{"line":1,"column":1041}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":30},"generated":{"line":1,"column":1043}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":49},"generated":{"line":1,"column":1062}},{"source":"components/pages/news.ts","name":null,"original":{"line":53,"column":54},"generated":{"line":1,"column":1064}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":1075}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":6},"generated":{"line":1,"column":1077}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":8},"generated":{"line":1,"column":1085}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":13},"generated":{"line":1,"column":1089}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":13},"generated":{"line":1,"column":1091}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":24},"generated":{"line":1,"column":1102}},{"source":"components/pages/news.ts","name":null,"original":{"line":54,"column":29},"generated":{"line":1,"column":1104}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":1114}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":6},"generated":{"line":1,"column":1116}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":8},"generated":{"line":1,"column":1124}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":13},"generated":{"line":1,"column":1128}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":1139}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":25},"generated":{"line":1,"column":1141}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":27},"generated":{"line":1,"column":1149}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":1,"column":1154}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":33},"generated":{"line":1,"column":1156}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":44},"generated":{"line":1,"column":1167}},{"source":"components/pages/news.ts","name":null,"original":{"line":55,"column":49},"generated":{"line":1,"column":1169}}],"sources":{"components/pages/news.ts":"﻿import m from 'mithril';\r\nimport { addStyleSheet, decodeHtml } from '../../services/dom-service';\r\nimport { dateToLocaleString } from '../../services/convert-service';\r\n\r\n// language=css\r\naddStyleSheet(`\r\n  .new-item{margin-bottom:2em;}\r\n  .home-date-time{font-weight:bold;margin:-1em 0 1em 0;}`);\r\n\r\nconst timerField = 'timer';\r\n\r\nexport const news = {\r\n  view: view,\r\n  oninit: oninit,\r\n  onremove: (v: m.Vnode) => clearInterval(v.state[timerField])\r\n};\r\n\r\nconst model = {\r\n  news: [],\r\n  time: Date.now(),\r\n};\r\n\r\nfunction oninit(v: m.Vnode): void {\r\n  updateNews();\r\n  v.state[timerField] = setInterval(updateTime, 1000);\r\n}\r\n\r\nfunction view(): m.Vnode {\r\n  return m(\r\n    'div',\r\n    [\r\n      m('h2', 'News'),\r\n      m('p', new Date(model.time).toLocaleString()),\r\n      m('div', model.news.map((item: any) => newsNode(item)))\r\n    ]);\r\n}\r\n\r\nfunction updateNews() {\r\n  m.request({ url: 'api/markets/news', data: Date.now() })\r\n    .then(r => model.news = r as any);\r\n}\r\n\r\nfunction updateTime() {\r\n  model.time = Date.now();\r\n  m.redraw();\r\n}\r\n\r\nfunction newsNode(item: any): m.Vnode {\r\n  const vn = m(\r\n    '.news-item',\r\n    [\r\n      m('h3', [m('a', { href: item.url, target: '_blank' } as any, decodeHtml(item.headline))]),\r\n      m('div.home-date-time', dateToLocaleString(item.datetime)),\r\n      m('p', decodeHtml(item.summary)),\r\n      m('p', 'source: ', m('em', decodeHtml(item.source)))\r\n    ]);\r\n\r\n  return vn;\r\n}\r\n"},"lineCount":null}},"hash":"9db295efd04675e9054295bc9d2c68db","cacheData":{"env":{}}}